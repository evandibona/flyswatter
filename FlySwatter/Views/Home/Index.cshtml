@model FlySwatter.Models.TicketTableViewModel 
@using FlySwatter.Models; 
@{
    ViewBag.Title = "Home";
}

<!-- This page should not even be shown unless the user is authenticated. -->
@if(HttpContext.Current.User.Identity.IsAuthenticated)
{
    var blocks = new Dictionary<string, string>();
    blocks.Add("Admin", "_Administrator"); blocks.Add("ProjectManager", "_ProjectManager");
    blocks.Add("Developer", "_Developer"); blocks.Add("Submitter", "_Submitter");
    var h = new ManageHelpers(); 
    string email = HttpContext.Current.User.Identity.Name;
    string userId = h.EmailToId(email);
    string[] roles = h.UserHasRoles(userId);
    foreach (var r in roles)
    {
        Html.RenderPartial(blocks[r], Model); 
    }
}